# witless_sister
_Телеграм бот для генерации сообщений на основе сообщений других пользователей_

Алгоритм генерации основан на [цепи Маркова]. Бот запоминает сообщения из чата, и каждые **N** сообщений генерирует и отправляет свое сообщение. Число **N** можно изменять. Словари разных чатов можно объединять. Работает как в беседах, так и в личной переписке. Может генерировать демотиваторы из картинок, стикеров, видео и гифок.

##### Первоначальная настройка
1. Создать в папке **_bin\Debug\netcoreapp3.1_** файл **.token** и записать туда токен бота.
2. Поместить **ffmpeg.exe** в папку **_C:\ffmpeg\bin_** (нужен для демотивации гифок и видео).
3. Создать в папке **_bin\Debug\netcoreapp3.1_** папку **_Telegram-Water_** и поместить в неё хотя бы одну вотермарку для демотиваторов. Вотермарка должна иметь расширение **.png**, а её название должно состоять как минимум из двух чисел, обозначающих координаты верхнего левого угла вотермарки на демотиваторе: первое - **X**, последнее - **Y**. Если есть вотерки с одинаковыми координатами, дополнительные слова можно вписать между координатами. Примеры названий: **52 580.png**, **52 a 580.png**. Если вотермарки не нужны, можно создать заглушку - 1x1 пиксель чёрного цвета **0 0.png**.

Все остальные папки создадутся программой автоматически по мере необходимости.
Если вы запускаете бота на разных компах, и вам нужно синхронизировать словари, создайте в папке **_bin\Debug\netcoreapp3.1_** папку **_A_**, закиньте в неё словари чатов с других устройств, и синхронизируйте их командой **/f**.

##### Консольные команды
- **\+*цифры*** - делает активным чатом тот, ID которого заканчивается на ***цифры***
- **/w *текст*** - отправляет в активный чат ***текст*** как сообщение и добавляет ***текст*** в словарь этого ж чата
- **/a *текст*** - добавляет ***текст*** в словарь активного чата
- **/s** - сохраняет словари всех чатов
- **/u** - перезагружает словари всех чатов
- **/r** - удаляет кадры, оставшиеся после создания анимаций (бот делает то же самое автоматически при запуске)
- **/f** - производит синхронизацию словарей всех чатов со словарями с тем же ID из папки **A**
- **s** - сохраняет словари всех чатов и выключает бота

[цепи Маркова]: <https://ru.wikipedia.org/wiki/%D0%A6%D0%B5%D0%BF%D1%8C_%D0%9C%D0%B0%D1%80%D0%BA%D0%BE%D0%B2%D0%B0>
